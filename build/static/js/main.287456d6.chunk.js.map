{"version":3,"sources":["components/SearchFilter.js","components/Person.js","components/Persons.js","components/AddPerson.js","services/persons.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["SearchFilter","searchTerm","searchTermUpdate","htmlFor","type","placeholder","value","onChange","id","Person","person","handleDelete","name","number","onClick","Persons","persons","filteredPersons","length","map","key","AddPerson","formSubmit","newName","nameChange","newNumber","numberChange","onSubmit","baseUrl","axios","get","then","response","data","newObject","post","delete","updatedObj","put","Notification","message","className","ErrorNotification","App","useState","setPersons","setNewName","setNewNumber","setSearchTerm","setFilteredPersons","setMessage","error","setError","useEffect","personService","initialPersons","evt","target","trimStart","personsArray","toUpperCase","searchUpper","newFilteredArray","filter","preventDefault","newNameUpper","matchingPersons","match","per","console","log","newPerson","includes","window","confirm","selected","find","selectedPerson","updatedPerson","returnedPerson","setTimeout","catch","e","alert","concat","personId","personToDel","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.287456d6.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\r\n\r\nconst SearchFilter = ({searchTerm, searchTermUpdate}) => (\r\n    <Fragment>\r\n        <label htmlFor=\"search\">{`Filter shown with  `}</label>\r\n        <input \r\n        type=\"text\"\r\n        placeholder=\"enter search term\"\r\n        value={searchTerm}\r\n        onChange={searchTermUpdate}\r\n        id=\"search\"\r\n        />\r\n    </Fragment>\r\n);\r\n\r\nexport default SearchFilter;","import React from 'react';\r\n\r\nconst Person = ({person, handleDelete}) => (\r\n    <div>\r\n        <span>{person.name} {`${person.number} `}</span>\r\n        <button \r\n            onClick={() => handleDelete(person.id)}\r\n        >\r\n            delete\r\n        </button>\r\n    </div>\r\n\r\n);\r\n\r\nexport default Person;","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst Persons = ({persons, filteredPersons, handleDelete}) => {\r\n    const output = filteredPersons.length <= 0 ? \r\n    persons.map(person => <Person key={person.name} person={person} handleDelete={handleDelete} />) :\r\n    filteredPersons.map(person => <Person key={person.name} person={person} handleDelete={handleDelete} />)\r\n    return output;\r\n};\r\n    \r\nexport default Persons;\r\n    \r\n","import React from 'react';\r\n\r\nconst AddPerson = ({formSubmit, newName, nameChange, newNumber, numberChange}) => (\r\n    <form onSubmit={formSubmit}>\r\n        <div>\r\n        name: <input \r\n                type=\"text\"\r\n                placeholder=\"Please enter name\"\r\n                value={newName} \r\n                onChange={nameChange}\r\n            />\r\n        </div>\r\n        <div>\r\n        number: <input \r\n                    type=\"tel\"\r\n                    placeholder=\"Please enter phone #\"\r\n                    value={newNumber} \r\n                    onChange={numberChange}\r\n                />\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n);\r\n\r\nexport default AddPerson;","import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deleteItem = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst updateNumber = (id, updatedObj) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, updatedObj);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default {getAll, create, deleteItem, updateNumber};","import React from 'react';\r\n\r\nconst Notification = ({message}) => {\r\n    if(message === null) {\r\n        return null;\r\n    } else {\r\n        return (\r\n            <div className=\"message\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nexport default Notification;","import React from 'react';\r\n\r\nconst ErrorNotification = ({message}) => (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n);\r\n\r\nexport default ErrorNotification;","import React, { useState, useEffect } from 'react';\nimport SearchFilter from './components/SearchFilter';\nimport Persons from './components/Persons';\nimport AddPerson from './components/AddPerson';\nimport personService from './services/persons';\nimport Notification from './components/Notification';\nimport ErrorNotification from './components/ErrorNotification';\n\nconst App = () => {\n  // COMPONENT STATE.\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ searchTerm, setSearchTerm ] = useState('');\n  const [ filteredPersons, setFilteredPersons ] = useState([]);\n  const [message, setMessage] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    personService.getAll()\n    .then (initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, [])\n\n  const nameChange = (evt) => {\n    const value = evt.target.value.trimStart();\n    setNewName(value);\n  };\n\n  const numberChange = (evt) => {\n    const number = evt.target.value.trimStart();\n    setNewNumber(number);\n  }\n\n  const searchTermUpdate = (evt) => {\n    const searchTerm = evt.target.value.trimStart();\n    setSearchTerm(searchTerm);\n    // Create a new persons array with every person's name in uppercase characters.\n    const personsArray = persons.map(person => {\n      return {\n        name: person.name.toUpperCase(),\n        number: person.number\n      }\n    });\n    // Convert searchTerm piece of state to uppercase.\n    const searchUpper = searchTerm.toUpperCase();\n    // set filteredPersons to array of elements that match the search term.\n    const newFilteredArray = personsArray.filter(person => person.name === searchUpper);\n    setFilteredPersons(newFilteredArray.length > 0 ? newFilteredArray : []);\n  };\n\n  const formSubmit = (evt) => {\n    evt.preventDefault();\n    // Create a new persons array with every user name in uppercase characters.\n    const personsArray = persons.map(person => {\n      let newPerson;\n      newPerson = {\n        ...person,\n        name: person.name.toUpperCase()\n      }\n      return newPerson;\n    });\n    const newNameUpper = newName.toUpperCase();\n    const matchingPersons = personsArray.filter(person => person.name === newNameUpper);\n    const match = matchingPersons.map(per => per.name);\n    console.log(personsArray);\n    console.log(matchingPersons);\n    console.log(match)\n    // Create newPerson object to be added to persons array piece of component state.\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n    // Check whether persons array already contains the name of user attempting to be added.\n    if(match.includes(newNameUpper)) {\n      // Check whether newly added person's number value is not an empty string.\n      if(newPerson.number !== '') {\n        // If number is not an empty string then confirm updating person's number.\n        if(window.confirm(`${newPerson.name} is already added to the phonebook, replace the old number with a new one?`)) {\n          const selected = personsArray.find(person => person.name === newNameUpper);\n          const selectedPerson = persons.find(person => person.id === selected.id);\n          // Selected Person's id property.\n          const id = selectedPerson.id;\n          // Update person's object, overwriting the number property on the object.\n          const updatedPerson = {...selectedPerson, number: newPerson.number};\n          personService.updateNumber(id, updatedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(per => per.id === id ? returnedPerson : per))\n            setMessage(`Added phone number for ${returnedPerson.name}`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000)\n          })\n          .catch(e => {\n            setError(`Cannot add phone number since ${updatedPerson.name} has already been deleted from server.`);\n            setPersons(persons.filter(person => person.id !== updatedPerson.id));\n            setTimeout(() => {\n              setError(null);\n            }, 5000)\n          })\n        } else {\n          // DO nothing.\n        }\n      } else {\n        alert(`Sorry ${newPerson.name} has already been added to the phonebook!`);\n      }\n      // const per = personsArray.find(per => per.name === newNameUpper);\n    } else {\n      personService.create(newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000)\n      })\n      .catch(e => alert('Unable to complete request, please try again!'))\n    }\n    // Reset both input fields value to an empty string.\n    setNewName('');\n    setNewNumber('');\n  }\n\n  const deletePerson = (personId) => {\n    const personToDel = persons.find(person => person.id === personId);\n    if(window.confirm(`Delete ${personToDel.name}?`)) {\n      personService.deleteItem(personId)\n      .then(returnedPerson => {\n        setPersons(persons.filter(person => person.id !== personId))\n        setMessage(`Deleted ${returnedPerson.name}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000)\n      })\n      .catch(e => {\n        setError(`${personToDel.name} has already been removed from server.`);\n        setPersons(persons.filter(person => person.id !== personToDel.id));\n        setTimeout(() => {\n          setError(null);\n        }, 5000)\n      });\n    } else {\n      //  do nothing.\n    }\n  };\n\n  return (\n    <div>\n      <Notification message={message} />\n      {error !== null && <ErrorNotification message={error} />}\n      <h1>Phonebook</h1>\n      <SearchFilter searchTerm={searchTerm} searchTermUpdate={searchTermUpdate} />\n      <h2>add a new</h2>\n      <AddPerson \n        newName={newName}\n        nameChange={nameChange}\n        formSubmit={formSubmit}\n        newNumber={newNumber}\n        numberChange={numberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons \n        persons={persons} \n        filteredPersons={filteredPersons} \n        handleDelete={deletePerson}\n      />\n    </div>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// styles.\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}